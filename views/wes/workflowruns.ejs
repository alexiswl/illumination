<% include ../partials/header %>

<h1 class="title">List of Workflow Runs</h1>

<table
  id="workflowrun_table"
  class="ui celled compact table"
  style="width:100%"
>
  <thead>
    <tr>
      <th>N</th>
      <th>ID</th>
      <th>History</th>
      <th>Status</th>
      <th>Error</th>
      <th>ErrorCause</th>
      <th>CreatedBy</th>
      <th>TimeCreated</th>
      <th>TimeStarted</th>
      <th>ModifiedBy</th>
      <th>TimeModified</th>
    </tr>
  </thead>
  <tbody>
    <% wruns = wruns["items"]; %> <% for (let i = 0; i < wruns.length; i++) { %>
    <tr>
      <td><%= `${i + 1}.` %></td>
      <td>
        <a href="/workflows/runs/<%= wruns[i].id %>"><%= wruns[i].id %></a>
      </td>
      <td><a href="/workflows/runs/<%= wruns[i].id %>/history">history</a></td>
      <td><%= wruns[i].status %></td>
      <td><%= wruns[i].error %></td>
      <td><%= wruns[i].errorCause %></td>
      <td><%= id2username(wruns[i].createdBy) %></td>
      <td><%= format_date(wruns[i].timeCreated) %></td>
      <td><%= format_date(wruns[i].timeStarted) %></td>
      <td><%= id2username(wruns[i].modifiedBy) %></td>
      <td><%= format_date(wruns[i].timeModified) %></td>
    </tr>
    <% } %>
  </tbody>
</table>

<script>
  $(document).ready(function() {
    $("#workflowrun_table").DataTable({
      columnDefs: [
        {
          targets: 5,
          render: $.fn.dataTable.render.ellipsis(10, true)
        }
      ]
    });
  });
</script>

<% include ../partials/footer %>
